// <auto-generated>
// THIS CODE FILE IS GENERATED BY IndirectX.TypeGenerator.
// DO NOT CHANGE IT.
// </auto-generated>
#nullable enable
using System;
using IndirectX.Interop;
using System.Runtime.InteropServices;
using System.Runtime.CompilerServices;

namespace IndirectX.D3D11
{
    internal static unsafe partial class WinApis
    {

        public static (Device device, FeatureLevel featureLevel, DeviceContext immediateContext) CreateDevice(Dxgi.Adapter? adapter, DriverType driverType, nint software, CreateDeviceFlags flags, ReadOnlySpan<FeatureLevel> featureLevels)
        {
            fixed (FeatureLevel* p_featureLevels = featureLevels)
            {
                NativeApi.D3D11CreateDevice(adapter?.ComPtr ?? default, driverType, software, flags, p_featureLevels, featureLevels.Length, Device.SdkVersion, out var device, out var featureLevel, out var immediateContext).HandleResult();
			    return (new Device(new ComPtr(device)), featureLevel, new DeviceContext(new ComPtr(immediateContext)));
            }
        }

        public static (Device device, FeatureLevel featureLevel, DeviceContext immediateContext) CreateDevice(DriverType driverType, nint software, CreateDeviceFlags flags)
        {
            {
                NativeApi.D3D11CreateDevice(default, driverType, software, flags, default, 0, Device.SdkVersion, out var device, out var featureLevel, out var immediateContext).HandleResult();
			    return (new Device(new ComPtr(device)), featureLevel, new DeviceContext(new ComPtr(immediateContext)));
            }
        }

        public static (Dxgi.SwapChain swapChain, Device device, FeatureLevel featureLevel, DeviceContext immediateContext) CreateDeviceAndSwapChain(Dxgi.Adapter? adapter, DriverType driverType, nint software, CreateDeviceFlags flags, ReadOnlySpan<FeatureLevel> featureLevels, in Dxgi.SwapChainDesc swapChainDesc)
        {
            fixed (FeatureLevel* p_featureLevels = featureLevels)
            fixed (Dxgi.SwapChainDesc* p_swapChainDesc = &swapChainDesc)
            {
                NativeApi.D3D11CreateDeviceAndSwapChain(adapter?.ComPtr ?? default, driverType, software, flags, p_featureLevels, featureLevels.Length, Device.SdkVersion, (nint)p_swapChainDesc, out var swapChain, out var device, out var featureLevel, out var immediateContext).HandleResult();
			    return (new Dxgi.SwapChain(new ComPtr(swapChain)), new Device(new ComPtr(device)), featureLevel, new DeviceContext(new ComPtr(immediateContext)));
            }
        }

        public static (Dxgi.SwapChain swapChain, Device device, FeatureLevel featureLevel, DeviceContext immediateContext) CreateDeviceAndSwapChain(DriverType driverType, nint software, CreateDeviceFlags flags)
        {
            {
                NativeApi.D3D11CreateDeviceAndSwapChain(default, driverType, software, flags, default, 0, Device.SdkVersion, 0, out var swapChain, out var device, out var featureLevel, out var immediateContext).HandleResult();
			    return (new Dxgi.SwapChain(new ComPtr(swapChain)), new Device(new ComPtr(device)), featureLevel, new DeviceContext(new ComPtr(immediateContext)));
            }
        }
    }

    internal static unsafe partial class NativeApi
    {
        [LibraryImport("d3d11.dll")]
        internal static partial HResult D3D11CreateDevice(nint pAdapter, DriverType DriverType, nint Software, CreateDeviceFlags Flags, FeatureLevel* pFeatureLevels, int FeatureLevels, int SDKVersion, out nint ppDevice, out FeatureLevel pFeatureLevel, out nint ppImmediateContext);

        [LibraryImport("d3d11.dll")]
        internal static partial HResult D3D11CreateDeviceAndSwapChain(nint pAdapter, DriverType DriverType, nint Software, CreateDeviceFlags Flags, FeatureLevel* pFeatureLevels, int FeatureLevels, int SDKVersion, nint pSwapChainDesc, out nint ppSwapChain, out nint ppDevice, out FeatureLevel pFeatureLevel, out nint ppImmediateContext);
    }
}
